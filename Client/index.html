<canvas id="ctx" width="1000" height="750" style="border:1px solid #000000;"></canvas>
<canvas id="scoreboard" width="200" height="200" style="border:0px solid #000000;"></canvas>
<script src ="http://cdn.socket.io/socket.io-1.4.5.js"></script>
<link rel="stylesheet" href="app.css" type="text/css"   />
<script>
	var ctx = document.getElementById("ctx").getContext("2d");
	var scoreboard = document.getElementById("scoreboard").getContext("2d");
	var socket = io();
	var minionImage = new Image();
	var backgroundImage = new Image();
	var bulletImage = new Image();
	var turretImage = new Image();
	minionImage.src = 	'https://lh5.googleusercontent.com/OJDpeuxkJh-6vCXtPzSJYoc-bxhZmlKsb5c8rrjrx-uaCgD9xzMvPB7xfcIs9cGaN3I-YOmTvdZZJGVx0gJnQGsskkig3coWIbOaJbtH';
	backgroundImage.src = 'https://i.stack.imgur.com/BFjwi.png';
	bulletImage.src = 'https://vignette.wikia.nocookie.net/vgc/images/5/5d/360280-nsmb_bullet_bill.jpg/revision/latest?cb=20140801063102';
	turretImage.src = 'https://lh6.googleusercontent.com/NKobNDUfmbkX3KY7svPGukd8irWGzHM21E8iZlyVP7DMnoGZZ2Fc_EzctCk-ArGEWe7gLD0ua5KTJrgKtzS9E0p7TRiYIRe37K5P9gFt';
	ctx.font = '30px Arial';
	ctx.drawImage(backgroundImage, 0, 0, 1000, 750);
	scoreboard.font = '20px Georgia';
	
	
	socket.on('newPosition', function(minionData, turretData, bulletData, id, health){
		ctx.clearRect(0,0,1000,750);
		scoreboard.clearRect(1200,0,200,200);
		scoreboard.fillText("Player " + id, 0,100);
		//scoreboard.fillText("Health " + health, 0,200);
		ctx.drawImage(backgroundImage, 0, 0, 1000, 750);
		for (var i = 0; i < minionData.length; i++){
			ctx.drawImage(minionImage, minionData[i].x, minionData[i].y, 30, 30);
		}
		for (var j = 0; j < turretData.length; j++){
			ctx.drawImage(turretImage, turretData[j].x, turretData[j].y, 40, 40);
		}
		for (var k = 0; k < bulletData.length; k++){
			ctx.drawImage(bulletImage, bulletData[k].x, bulletData[k].y, 10, 10);
		}
		/*
		for (var n = 0; n < health.length; n++){
			scoreboard.fillText("Health " + health[n], 0,200);
		}*/
	});
	
	socket.on('game over', function(i){
		ctx.clearRect(0,0,1000,750);
		ctx.drawImage(backgroundImage, 0, 0, 1000, 750);
		alert("Player " + i + " wins!!");
	});	
</script>

<button type="button" onclick="socket.emit('createMinion')">Send Mob</button>
<button type="button" onclick="socket.emit('createTurret')">Create Turret</button>
<button type="button" onclick="socket.emit('deleteTurret')">Sell Turrets</button>
